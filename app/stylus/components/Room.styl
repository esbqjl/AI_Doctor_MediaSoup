// app/stylus/components/Room.styl

[data-component='Room']
  position: relative
  height: 100%
  width: 100%
  display: flex
  justify-content: center
  align-items: center

  AppearFadeIn(300ms)


  > .video-chat-wrapper
    display flex
    justify-content center
    align-items center
    width 100% // Set width to center within Room component
    height 100% // Optional to ensure it aligns vertically as well

  > .video-chat-container
    display: flex
    justify-content: center
    align-items: center
    width: 400px  // Fixed width
    height: 400px // Fixed height
    overflow: hidden
    border-radius: 12px
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1)
    background-color: #48df0c


  > .state
    position: fixed
    z-index: 100
    display: flex
    flex-direction: row
    justify-content: center
    align-items: center
    border-radius: 25px
    background-color: $COLOR_BG_1

    +desktop()
      top: 20px
      left: 20px
      width: 124px

    +mobile()
      top: 10px
      left: 10px
      width: 110px

    > .icon
      flex: 0 0 auto
      border-radius: 100%

      +desktop()
        margin: 6px
        margin-right: 0
        height: 16px
        width: 16px

      +mobile()
        margin: 4px
        margin-right: 0
        height: 16px
        width: 16px

      &.new, &.closed
        background-color: rgba(#aaa, 0.5)

      &.connecting
        animation: Room-info-state-connecting .75s infinite linear

      &.connected
        background-color: rgba(#30bd18, 0.75)

        +mobile()
          display: none

    > .text
      flex: 100 0 auto
      user-select: none
      pointer-events: none
      text-align: center
      text-transform: uppercase
      font-family: 'Roboto'
      font-weight: 400
      color: rgba(#fff, 0.75)

      +desktop()
        font-size: 12px

      +mobile()
        font-size: 10px

      &.connected
        +mobile()
          display: none

  > .info
    position: fixed
    z-index: 100

    +desktop()
      top: 80px
      left: 70px
      width: 124px

    +mobile()
      top: 40px
      height: 18px
      width: 110px

    > p.text
      height: 18px
      left: 10px
      display: flex
      flex-direction: row
      justify-content: center
      align-items: center
      flex: 100 0 auto
      user-select: none
      pointer-events: none
      text-align: center
      font-family: 'Roboto'
      font-weight: 400
      color: rgba(#fff, 0.75)
      border-radius: 25px
      background-color: $COLOR_BG_1
      margin-bottom: 2px

      +desktop()
        font-size: 11px

      +mobile()
        font-size: 9px

      > span.label
        color: rgba(#fff, 0.45)

  > .room-link-wrapper
    pointer-events: none
    position: absolute
    z-index: 1
    top: 0
    left: 0
    right: 0
    display: flex
    flex-direction: row
    justify-content: center

    > .room-link
      width: auto
      background-color: $COLOR_BG_1
      border-bottom-right-radius: 4px
      border-bottom-left-radius: 4px
      box-shadow: 0px 3px 12px 2px rgba(#111, 0.4)

      > a.link
        display: block
        user-select: none
        pointer-events: auto
        text-transform: uppercase
        font-family: 'Roboto'
        font-weight: 400
        color: rgba(#fff, 0.75)
        cursor: pointer
        text-decoration: none
        transition-property: color
        transition-duration: 0.1s

        +desktop()
          padding: 10px 20px
          font-size: 12px

        +mobile()
          padding: 6px 10px
          font-size: 10px

        &:hover
          color: #fff
          text-decoration: underline

  > .me-container
    position: absolute // 修改为 absolute，以支持拖拽
    z-index: 100
    overflow: hidden
    box-shadow: 0px 5px 12px 2px rgba(#111, 0.5)
    border-radius: 10px // 调整为圆角
    border: 1px solid rgba(#fff, 0.15)

    +desktop()
      height: 250px
      width: 350px
      bottom: 60px
      left: 200px // 初始位置向右移动

    +mobile()
      height: 220px
      width: 280px
      bottom: 50px
      left: 100px // 初始位置向右移动

    &.active-speaker
      border-color: #fff

    // 控制按钮的样式
    > .controls
      position: absolute
      top: 10px
      right: 10px
      display: flex
      flex-direction: column

      > .control-button
        background-color: #fff
        border: none
        border-radius: 50%
        width: 32px
        height: 32px
        margin-bottom: 8px
        display: flex
        align-items: center
        justify-content: center
        cursor: pointer
        transition: background-color 0.2s

        &:hover
          background-color: #e0e0e0

        > svg
          color: #000
          width: 20px
          height: 20px

  // 移除聊天输入框的样式，因为我们不再需要它
  // > .chat-input-container
  //   // 原有样式被移除

  > .sidebar
    position: fixed
    z-index: 101
    top: calc(50% - 60px)
    height: 120px
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center

    +desktop()
      left: 20px
      width: 36px
      margin-top: -60px

    +mobile()
      left: 10px
      width: 32px
      margin-top: -80px

    > .button
      flex: 0 0 auto
      margin: 4px 0
      background-position: center
      background-size: 75%
      background-repeat: no-repeat
      background-color: $COLOR_BG_1
      cursor: pointer
      transition-property: opacity, background-color
      transition-duration: 0.2s
      border-radius: 100%

      +desktop()
        height: 36px
        width: 36px

      +mobile()
        height: 32px
        width: 32px

      &.on
        background-color: rgba(#fff, 0.7)

      &.disabled
        pointer-events: none
        opacity: 0.5
        transition-duration: 0s

      &.hide-videos
        background-image: url('/resources/images/icon_video_white_on.svg')

        &.on
          background-image: url('/resources/images/icon_video_black_off.svg')

      &.mute-audio
        background-image: url('/resources/images/icon_volume_white_on.svg')

        &.on
          background-image: url('/resources/images/icon_volume_black_off.svg')

      &.restart-ice
        background-image: url('/resources/images/icon_restart_ice_white.svg')

@keyframes Room-info-state-connecting
  50%
    background-color: rgba(orange, 0.75)
